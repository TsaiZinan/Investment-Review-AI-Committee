---
name: "weekly-summary"
description: "触发语：每周总结 / 开始每周趋势分析。读取一周每日最终报告，输出每周投资总结。"
---

# 每周趋势分析器

当用户输入“每周总结”（或表达要开始每周趋势分析）时，执行本技能。

本技能只基于 `每日最终报告/` 目录下的日报汇总进行趋势统计与归并，不引入任何外部信息与推测。

## 执行流程

### 步骤0：确认周区间与模型
- 向用户提问：`🤔即将进行每周趋势分析。请确认分析的周区间（开始日期~结束日期）？`
- 同时询问用户确认：`本周主要参考的模型是否都在列表中？（参考列表：DeepSeek, Gemini, GPT-5.2, Grok-4, GLM-4.7, Kimi, MiniMax-M2.1, TraeAI）`
- 若用户未提供日期，默认取“最近一个完整自然周”（周一到周日）
- 必须等待用户回复后才能继续

### 步骤1：收集输入集
- 输入目录：`每日最终报告/`
- 读取所有匹配 `^\\d{4}-\\d{2}-\\d{2}_最终投资总结\\.md$` 的文件
- 仅保留文件名日期落在 `[<WEEK_START>, <WEEK_END>]` 内的文件，并按日期升序处理

### 步骤2：生成周报
- 严格遵循 `3每周总结分析prompt.md` 的“生成规则/输出结构/质量检查清单”
- 输出文件路径（覆盖写入）：
  - `每周分析报告/<WEEK_START>~<WEEK_END>_每周投资总结.md`

### 步骤3：最小校验
- 顶部标题必须为：`# 每周投资总结（<WEEK_START>~<WEEK_END>）`
- 必须包含：`## 0. 数据覆盖`、`## 1...`、`## 2...`、`## 3...` 四个章节
- 所有百分比展示为两位小数并带 `%`，变化值带 `Δ` 且两位小数

### 步骤4：上传 GitHub
- 生成完成且校验通过后，执行：
  - `git add "每周分析报告/<WEEK_START>~<WEEK_END>_每周投资总结.md"`
  - `git commit -m "每周总结 <WEEK_START>~<WEEK_END>"`
  - `git push`
